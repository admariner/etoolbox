(this["webpackJsonpweb-toolbox"]=this["webpackJsonpweb-toolbox"]||[]).push([[35],{1069:function(e,t,n){"use strict";n.r(t),n.d(t,"mapStateToProps",(function(){return ie})),n.d(t,"mapDispatchToProps",(function(){return ce}));var a=n(13),r=n(37),o=n(351),i=n(1059),c=n(1068),s=n(360),l=n(268),u=n(166),d=n(269),m=n(385),j=n(266),b=n(263),f=n(270),h=n(64),O=n(286),p=n(264),g=n(341),v=n(923),x=n.n(v),y=n(920),k=n.n(y),C=n(921),N=n.n(C),P=n(421),S=n.n(P),U=n(922),w=n.n(U),I=n(0),D=n(94),E=n(96),T=n(8),W=n(97),R=n(141),L=n(302),H=n(299),M=n(391),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return{type:"vote",payload:{username:e,estimate:t,estimatedAt:t?new Date:void 0}}},V=["?","0","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","8","13","20","40","100"],X=["?","0","1","2","3","5","8","13","20","40","100"],A=["?","S","M","L","XL"],z=["?","XS","S","M","L","XL","XXL"],B={fibonnacy:{values:X,displayValue:X.slice(2).join(" "),sorter:function(e,t){return X.indexOf(e)-X.indexOf(t)}},"fibonnacy-variant-1":{values:V,displayValue:V.slice(2).map((function(e){return e.replace("0.5","\xbd")})).map((function(e){return e.replace(".5","\xbd")})).join(" "),sorter:function(e,t){return V.indexOf(e)-V.indexOf(t)}},"t-shirt":{values:A,displayValue:A.slice(1).join(" "),sorter:function(e,t){return A.indexOf(e)-A.indexOf(t)}},"t-shirt-variant-1":{values:z,displayValue:z.slice(1).join(" "),sorter:function(e,t){return z.indexOf(e)-z.indexOf(t)}}},G="localhost",F=new Map([[WebSocket.CLOSED,"closed"],[WebSocket.OPEN,"open"],[WebSocket.CLOSING,"closing"],[WebSocket.CONNECTING,"connecting"]]),Y=n(2),q=Object(O.a)()((function(e){var t=e.width,n=e.value,a=e.isDisabled,o=e.isSelected,i=e.onClick,c=Object(r.a)(),s=Object(O.c)("md",t)?"70px":"48px";return Object(Y.jsx)(p.a,{style:{maxWidth:s,maxHeight:s,minWidth:s,minHeight:s,margin:c.spacing(1)},variant:o?"contained":"outlined",disabled:a,title:"Estimate the current story point as: [".concat(n,"]"),color:"primary",onClick:function(){return i(n)},children:Object(Y.jsx)(h.a,{variant:"h5",children:n})})})),K=n(919),Q=n(1042),Z=function(e){var t;return null!==(t=F.get(e))&&void 0!==t?t:"closed"},$=function(e){var t=e.hostname,n=void 0===t?G:t,a=e.roomName,r=void 0===a?"default":a,o=e.roomUUID,i=void 0===o?Object(Q.a)():o;return"/PokerPlanning/".concat(n,"/").concat(i,"/").concat(r)},_=function(e){return document.location.href.split("/#/")[0]+"/#"+$(e)},ee=n(9),te=n(265),ne=n(258),ae=Object(ee.a)((function(){return{body:{fontSize:14,whiteSpace:"normal",wordBreak:"break-word"}}}))(te.a),re=Object(ee.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(j.a),oe=Object(ne.a)((function(e){return{root:{margin:e.spacing(1)},toolbar:{height:"100%",margin:0,padding:0,"& > *":{marginLeft:e.spacing(1)}},formControl:{marginRight:e.spacing(1)},submitEstimate:{marginTop:e.spacing(2),display:"flex",justifyContent:"center",flexWrap:"wrap"},teamEstimates:{marginTop:e.spacing(4)},tableHeader:{backgroundColor:e.palette.primary.main}}}));function ie(e){return{lastPokerPlanningHostName:e.textInputs.lastPokerPlanningHostName,lastPokerPlanningRoomUUID:e.textInputs.lastPokerPlanningRoomUUID,lastPokerPlanningRoomName:e.textInputs.lastPokerPlanningRoomName,lastPokerPlanningUsername:e.textInputs.lastPokerPlanningUsername,lastPokerCardsListingCategoryName:e.textInputs.lastPokerCardsListingCategoryName}}function ce(e){return{storeInputText:function(t,n){return e(Object(W.b)(t,n))}}}t.default=Object(E.b)(ie,ce)(Object(O.a)()((function(e){var t,n=oe(),O=Object(r.a)(),v=Object(T.l)(),y=Object(R.b)().showConfirmationDialog,C=Object(T.n)(),P=C.hostName,U=C.roomUUID,E=C.roomName,W=e.lastPokerPlanningRoomUUID,V=e.lastPokerPlanningRoomName,X=e.lastPokerPlanningUsername,A=e.lastPokerPlanningHostName,z=e.lastPokerCardsListingCategoryName,F=e.storeInputText,ee=Object(I.useRef)(),te=Object(I.useState)("closed"),ne=Object(a.a)(te,2),ie=ne[0],ce=ne[1],se=Object(I.useState)(),le=Object(a.a)(se,2),ue=le[0],de=le[1],me=Object(I.useState)(),je=Object(a.a)(me,2),be=je[0],fe=je[1],he=Object(I.useState)(!1),Oe=Object(a.a)(he,2),pe=Oe[0],ge=Oe[1],ve=Object(I.useState)(),xe=Object(a.a)(ve,2),ye=xe[0],ke=xe[1],Ce="Poker planning ".concat(null!==V&&void 0!==V?V:"").trim(),Ne=null!==(t=null===ye||void 0===ye?void 0:ye.estimates)&&void 0!==t?t:[],Pe=z||"fibonnacy",Se=B[Pe],Ue=function(e,t){var n=e.map((function(e){return e.estimate})).filter((function(e){return!!e})).filter((function(e){return Object(M.c)(e)})).map((function(e){return Number(e)})),a=n.reduce((function(e,t){return e+Number(t)}),0),r=n.length>0?a/n.length:0;return{values:n,estimatesSum:a,estimatesAverage:Math.round(10*r+Number.EPSILON)/10,isEstimatesCleared:e.length>0&&e.every((function(e){return void 0===e.estimate})),isUserMemberOfRoom:!(null===t||void 0===t||!t.trim())&&e.some((function(e){return e.username===t}))}}(Ne,X),we=Ue.estimatesAverage,Ie=Ue.isEstimatesCleared,De=Ue.isUserMemberOfRoom,Ee=Object(M.b)(A)&&Object(M.b)(W)&&Object(M.b)(P)&&Object(M.b)(U),Te=Object(M.b)(A)&&Object(M.b)(W)&&Object(M.b)(V)&&Object(M.b)(X);Object(I.useEffect)((function(){E&&U&&P&&(F("lastPokerPlanningRoomName",E),F("lastPokerPlanningRoomUUID",U),F("lastPokerPlanningHostName",P))}),[U,E,P,F]),Object(I.useEffect)((function(){Ee&&(ee.current=function(e){var t=e.hostname,n=void 0===t?G:t,a=e.roomUUID,r=void 0===a?Object(Q.a)():a,o=e.onSocketStateUpdate,i=e.onSessionUpdate,c="https:"===document.location.protocol?"wss":"ws",s="".concat(c,"://").concat(n,"/ws?roomUUID=").concat(r),l=new K.a(s);return l.onopen=function(){return o(Z(l.readyState))},l.onerror=function(){return o(Z(l.readyState))},l.onclose=function(){return o(Z(l.readyState))},l.onmessage=function(e){var t=JSON.parse(e.data);i(t)},l}({hostname:A,roomUUID:W,onSessionUpdate:ke,onSocketStateUpdate:ce}))}),[ee,Ee,A,W]),Object(I.useEffect)((function(){return function(){var e;return null===(e=ee.current)||void 0===e?void 0:e.close()}}),[]);Object(I.useEffect)((function(){Ie&&(ge(!1),de(void 0))}),[Ie]);var We=function(e){ee.current&&"open"===ie?ee.current.send(JSON.stringify(e)):fe(e)};return Object(I.useEffect)((function(){ee.current&&"open"===ie&&be&&(ee.current.send(JSON.stringify(be)),fe(void 0))}),[be,ie]),Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(D.a,{title:Ce}),Object(Y.jsxs)("div",{className:n.root,children:[Object(Y.jsx)(H.a,{iconType:k.a,title:Ce}),Object(Y.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(Y.jsxs)(o.a,{container:!0,spacing:1,children:[Object(Y.jsx)(o.a,{item:!0,md:2,xs:6,children:Object(Y.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(Y.jsx)(g.a,{label:"Serveur (channel ".concat(ie,")"),placeholder:"Type the poker plannind hostname here",variant:"outlined",fullWidth:!0,margin:"normal",value:A,onChange:function(e){return F("lastPokerPlanningHostName",e.target.value)}})})}),Object(Y.jsx)(o.a,{item:!0,md:2,xs:6,children:Object(Y.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(Y.jsx)(g.a,{label:"Team name",placeholder:"Type the team name here",variant:"outlined",fullWidth:!0,margin:"normal",value:V,onChange:function(e){return F("lastPokerPlanningRoomName",e.target.value)}})})}),Object(Y.jsx)(o.a,{item:!0,md:2,xs:6,children:Object(Y.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(Y.jsx)(g.a,{label:"Your name",placeholder:"Type your name here",variant:"outlined",fullWidth:!0,margin:"normal",value:X,onChange:function(e){return F("lastPokerPlanningUsername",e.target.value)}})})}),Object(Y.jsx)(o.a,{item:!0,md:3,xs:6,children:Object(Y.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(Y.jsx)(c.a,{style:{marginTop:O.spacing(2)},variant:"outlined",fullWidth:!0,value:Pe,onChange:function(e){return F("lastPokerCardsListingCategoryName",e.target.value)},children:Object.entries(B).map((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(Y.jsx)(s.a,{value:n,children:r.displayValue},n)}))})})})," ",Object(Y.jsx)(o.a,{item:!0,md:3,xs:12,children:Object(Y.jsxs)(o.a,{container:!0,justifyContent:"flex-end",alignItems:"center",className:n.toolbar,children:[Object(Y.jsx)(p.a,{variant:"contained",title:"Register the team and start planning in a new room",color:"primary",onClick:function(){var e=$({hostname:A,roomName:V});v(e,{replace:!0})},children:"New"}),Object(Y.jsx)(p.a,{variant:"contained",title:"Enter existing room",color:"primary",disabled:De||!Te,onClick:function(){return We(J(X))},children:"Join"}),Object(Y.jsx)(L.a,{data:_({hostname:A,roomUUID:W,roomName:V}),Icon:N.a,hoverMessage:"Copy link to clipboard for sharing",feedbackMessage:"Link copied to clipboard, you can now share to all members"})]})})]})}),Object(Y.jsx)("div",{className:n.submitEstimate,children:Se.values.map((function(e){return Object(Y.jsx)(q,{isDisabled:!Te,isSelected:ue===e,value:e,onClick:function(){return function(e){e!==ue?(de(e),We(J(X,e))):(de(void 0),We(J(X)))}(e)}},e)}))}),Object(Y.jsx)("div",{className:n.teamEstimates,children:Object(Y.jsx)(l.a,{component:u.a,children:Object(Y.jsxs)(d.a,{size:"small",children:[Object(Y.jsx)(m.a,{className:n.tableHeader,children:Object(Y.jsxs)(j.a,{children:[Object(Y.jsx)(ae,{component:"th",scope:"row",width:30}),Object(Y.jsx)(ae,{component:"th",scope:"row",children:"Team member"}),Object(Y.jsxs)(ae,{component:"th",scope:"row",align:"center",children:["Points",Object(Y.jsx)(b.a,{title:"Toggle story points visibility",onClick:function(){return ge((function(e){return!e}))},children:pe?Object(Y.jsx)(w.a,{}):Object(Y.jsx)(S.a,{})}),Object(Y.jsx)(b.a,{onClick:function(){return y({title:"Confirmation",description:"Are you sure you want to delete all votes?",onConfirm:function(){return We({type:"reset"})}})},title:"Clear all votes",children:Object(Y.jsx)(x.a,{})})]})]})}),Object(Y.jsxs)(f.a,{children:[Ne.sort((function(e,t){return e.username.localeCompare(t.username)})).map((function(e){var t=e.username,n=e.estimate,a=null!==n&&void 0!==n?n:"\u2026",r=n?"\u2714":"\u2026";return Object(Y.jsxs)(re,{children:[Object(Y.jsx)(ae,{width:30,children:Object(Y.jsx)(b.a,{onClick:function(){return We(function(){return{type:"remove",payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}(t))},title:'Remove user "'.concat(t,'"'),children:Object(Y.jsx)(x.a,{})})}),Object(Y.jsx)(ae,{children:t}),Object(Y.jsx)(ae,{align:"center",children:pe?a:r})]},t)})),Object(Y.jsxs)(re,{children:[Object(Y.jsx)(ae,{width:30}),Object(Y.jsx)(ae,{children:Object(Y.jsx)(h.a,{children:"Story points average"})}),Object(Y.jsx)(ae,{align:"center",children:Object(Y.jsx)(h.a,{children:pe?we:""})})]},"average")]})]})})})]})]})})))},299:function(e,t,n){"use strict";var a=n(64),r=n(258),o=(n(0),n(2)),i=Object(r.a)((function(e){return{title:{wordBreak:"break-word"},titleWithIcon:{display:"flex",alignItems:"center"},titleContainer:{display:"flex",justifyContent:"center"},icon:{height:"40px",width:"40px",marginRight:e.spacing(1)}}}));t.a=function(e){var t=i(),n=e.iconType;return Object(o.jsx)("div",{className:t.titleContainer,children:Object(o.jsxs)("div",{className:t.titleWithIcon,children:[Object(o.jsx)(n,{className:t.icon}),Object(o.jsx)(a.a,{variant:"h5",className:t.title,children:e.title})]})})}},302:function(e,t,n){"use strict";var a=n(264),r=n(309),o=n.n(r),i=n(305),c=n.n(i),s=(n(0),n(95)),l=n(2);t.a=function(e){var t=e.data,n=e.hoverMessage,r=e.feedbackMessage,i=e.Icon,u=void 0===i?o.a:i,d=Object(s.c)().setToasterState;return Object(l.jsx)(a.a,{onClick:function(){if(t){var e=null!==r&&void 0!==r?r:"Content copied into clipboard: ".concat(t.substring(0,25)," \u2026");c.a(t,{format:"text/plain"}),d({open:!0,message:e,type:"success",autoHideDuration:2e3})}},disabled:!t,title:null!==n&&void 0!==n?n:"Copy to clipboard",variant:"contained",color:"primary",children:Object(l.jsx)(u,{})})}},391:function(e,t,n){"use strict";function a(e){return!e||0===e.trim().length}function r(e){return!a(e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));var o=function(e){return!isNaN(Number(e))}}}]);
//# sourceMappingURL=35.19159abf.chunk.js.map