(this["webpackJsonpweb-toolbox"]=this["webpackJsonpweb-toolbox"]||[]).push([[36],{1060:function(e,t,n){"use strict";n.r(t),n.d(t,"mapStateToProps",(function(){return ae})),n.d(t,"mapDispatchToProps",(function(){return re}));var a=n(12),r=n(348),i=n(1047),c=n(260),o=n(217),s=n(261),l=n(276),u=n(410),d=n(258),j=n(262),b=n(555),m=n(1028),O=n(255),h=n(67),f=n(256),p=n(332),x=n(519),g=n.n(x),v=n(907),y=n.n(v),k=n(908),P=n.n(k),C=n(411),N=n.n(C),w=n(909),S=n.n(w),I=n(0),E=n(93),U=n(95),R=n(8),T=n(906),W=n(1027),D=n(96),H=n(1052),J=n(1054),M=n(1053),A=n(1055),L=n(2),V=function(e){var t=e.title,n=e.children,a=e.isOpen,r=e.setIsOpen,i=e.onConfirm;return Object(L.jsxs)(H.a,{open:a,onClose:function(){return r(!1)},"aria-labelledby":"confirm-dialog",children:[Object(L.jsx)(A.a,{id:"confirm-dialog",children:t}),Object(L.jsx)(M.a,{children:n}),Object(L.jsxs)(J.a,{children:[Object(L.jsx)(f.a,{variant:"contained",onClick:function(){return r(!1)},color:"secondary",children:"No"}),Object(L.jsx)(f.a,{variant:"contained",onClick:function(){r(!1),i()},color:"default",children:"Yes"})]})]})},z=n(292),B=n(289),G=n(425),Y=["?","0","0.5","1","1.5","2","2.5","3","3.5","4","4.5","5","8","13","20","40","100"],F=new Map([[WebSocket.CLOSED,"closed"],[WebSocket.OPEN,"open"],[WebSocket.CLOSING,"closing"],[WebSocket.CONNECTING,"connecting"]]),q=n(37),K="".concat(70,"px"),Q=function(e){var t=e.value,n=e.isDisabled,a=e.isSelected,r=e.onClick,i=Object(q.a)();return Object(L.jsx)(f.a,{style:{maxWidth:K,maxHeight:K,minWidth:K,minHeight:K,margin:i.spacing(1)},variant:a?"contained":"outlined",disabled:n,title:"Estimate the current story point as: [".concat(t,"]"),color:"primary",onClick:function(){return r(t)},children:Object(L.jsx)(h.a,{variant:"h5",children:t})})},X=function(e){var t;return null!==(t=F.get(e))&&void 0!==t?t:"closed"},Z=n(11),$=n(257),_=n(250),ee=Object(Z.a)((function(){return{body:{fontSize:14,whiteSpace:"normal",wordBreak:"break-word"}}}))($.a),te=Object(Z.a)((function(e){return{root:{"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover}}}}))(d.a),ne=Object(_.a)((function(e){return{root:{margin:e.spacing(1)},toolbar:{height:"100%",margin:0,padding:0,"& > *":{marginLeft:e.spacing(1)}},formControl:{marginRight:e.spacing(1)},submitEstimate:{marginTop:e.spacing(2),display:"flex",justifyContent:"center",flexWrap:"wrap"},estimatesVisibility:{alignItems:"center"},teamEstimates:{marginTop:e.spacing(4)},tableHeader:{backgroundColor:e.palette.primary.main}}}));function ae(e){return{lastPockerPlanningHostName:e.textInputs.lastPockerPlanningHostName,lastPockerPlanningRoomUUID:e.textInputs.lastPockerPlanningRoomUUID,lastPockerPlanningRoomName:e.textInputs.lastPockerPlanningRoomName,lastPockerPlanningUsername:e.textInputs.lastPockerPlanningUsername}}function re(e){return{storeInputText:function(t,n){return e(Object(D.b)(t,n))}}}t.default=Object(U.b)(ae,re)(Object(l.a)()((function(e){var t="Porker planning",n=ne(),x=Object(R.l)(),v=Object(R.n)(),k=v.hostName,C=v.roomUUID,w=v.roomName,U=e.lastPockerPlanningRoomUUID,D=e.lastPockerPlanningRoomName,H=e.lastPockerPlanningUsername,J=e.lastPockerPlanningHostName,M=e.storeInputText,A=Object(I.useRef)(),F=Object(I.useState)(),q=Object(a.a)(F,2),K=q[0],Z=q[1],$=Object(I.useState)("closed"),_=Object(a.a)($,2),ae=_[0],re=_[1],ie=Object(I.useState)(),ce=Object(a.a)(ie,2),oe=ce[0],se=ce[1],le=Object(I.useState)(!1),ue=Object(a.a)(le,2),de=ue[0],je=ue[1],be=Object(I.useState)(!1),me=Object(a.a)(be,2),Oe=me[0],he=me[1],fe=Object(I.useState)([]),pe=Object(a.a)(fe,2),xe=pe[0],ge=pe[1],ve=function(e,t){var n=e.map((function(e){return e.estimate})).filter((function(e){return null!==e&&void 0!==e&&"?"!==e})).map((function(e){return Number(e)})),a=n.reduce((function(e,t){return e+Number(t)}),0),r=n.length>0?a/n.length:0;return{values:n,estimatesSum:a,estimatesAverage:Math.round(10*r+Number.EPSILON)/10,isEstimatesCleared:e.length>0&&e.every((function(e){return void 0===e.estimate})),isUserMemberOfRoom:!(null===t||void 0===t||!t.trim())&&e.some((function(e){return e.username===t}))}}(xe,H),ye=ve.estimatesAverage,ke=ve.isEstimatesCleared,Pe=ve.isUserMemberOfRoom,Ce=Object(G.b)(J)&&Object(G.b)(U)&&Object(G.b)(k)&&Object(G.b)(C),Ne=Object(G.b)(J)&&Object(G.b)(U)&&Object(G.b)(D)&&Object(G.b)(H);Object(I.useEffect)((function(){w&&C&&k&&(M("lastPockerPlanningRoomName",w),M("lastPockerPlanningRoomUUID",C),M("lastPockerPlanningHostName",k))}),[C,w,k,M]),Object(I.useEffect)((function(){if(Ce){var e="https:"===window.location.protocol?"wss":"ws",t="".concat(e,"://").concat(J,"/ws?roomUUID=").concat(U),n=new T.a(t);n.onopen=function(){return re(X(n.readyState))},n.onerror=function(){return re(X(n.readyState))},n.onclose=function(){return re(X(n.readyState))},n.onmessage=function(e){var t=JSON.parse(e.data);ge(t.estimates)},A.current=n}}),[A,Ce,J,U]),Object(I.useEffect)((function(){return function(){var e;return null===(e=A.current)||void 0===e?void 0:e.close()}}),[]),Object(I.useEffect)((function(){var e;"open"===ae&&oe&&(null===(e=A.current)||void 0===e||e.send(JSON.stringify(oe)),se(void 0))}),[oe,ae]);Object(I.useEffect)((function(){ke&&(he(!1),Z(void 0))}),[ke]);return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(E.a,{title:t}),Object(L.jsxs)("div",{className:n.root,children:[Object(L.jsx)(B.a,{iconType:y.a,title:t}),Object(L.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(L.jsxs)(r.a,{container:!0,spacing:1,children:[Object(L.jsx)(r.a,{item:!0,md:3,sm:6,xs:12,children:Object(L.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(L.jsx)(p.a,{label:"Server (hostname)",placeholder:"Type the poker plannind hostname here",variant:"outlined",fullWidth:!0,margin:"normal",value:J,onChange:function(e){return M("lastPockerPlanningHostName",e.target.value)}})})}),Object(L.jsx)(r.a,{item:!0,md:3,sm:6,xs:12,children:Object(L.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(L.jsx)(p.a,{label:"Team name",placeholder:"Type the team name here",variant:"outlined",fullWidth:!0,margin:"normal",value:D,onChange:function(e){return M("lastPockerPlanningRoomName",e.target.value)}})})}),Object(L.jsx)(r.a,{item:!0,md:3,sm:6,xs:12,children:Object(L.jsx)(i.a,{className:n.formControl,fullWidth:!0,children:Object(L.jsx)(p.a,{label:"Your name",placeholder:"Type your name here",variant:"outlined",fullWidth:!0,margin:"normal",value:H,onChange:function(e){return M("lastPockerPlanningUsername",e.target.value)}})})}),Object(L.jsx)(r.a,{item:!0,md:3,sm:6,xs:12,children:Object(L.jsxs)(r.a,{container:!0,justifyContent:"flex-end",alignItems:"center",className:n.toolbar,children:[Object(L.jsx)(f.a,{variant:"contained",title:"Register the team and start planning in a new room",color:"primary",onClick:function(){var e=Object(W.a)(),t="/PokerPlanning/".concat(J,"/").concat(e,"/").concat(D);x(t,{replace:!0})},children:"New room"}),Object(L.jsx)(f.a,{variant:"contained",title:"Enter existing room",color:"primary",disabled:Pe||!Ne,onClick:function(){var e;H&&(null===(e=A.current)||void 0===e||e.send(JSON.stringify({type:"vote",payload:{username:null!==H&&void 0!==H?H:""}})))},children:"Join"}),Object(L.jsx)(z.a,{data:window.location.href,Icon:P.a,hoverMessage:"Copy link to clipboard for sharing",feedbackMessage:"Link copied to clipboard, you can now share to all members"})]})})]})}),Object(L.jsx)("div",{className:n.submitEstimate,children:Y.map((function(e){return Object(L.jsx)(Q,{isDisabled:!Ne,isSelected:K===e,value:e,onClick:function(){return function(e){var t;Z(e);var n={type:"vote",payload:{username:null!==H&&void 0!==H?H:"",estimate:e,estimatedAt:e?new Date:void 0}};(null===(t=A.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?A.current.send(JSON.stringify(n)):se(n)}(e)}},e)}))}),Object(L.jsx)("div",{className:n.teamEstimates,children:Object(L.jsx)(c.a,{component:o.a,children:Object(L.jsxs)(s.a,{size:Object(l.c)("md",e.width)?"medium":"small",children:[Object(L.jsx)(u.a,{className:n.tableHeader,children:Object(L.jsxs)(d.a,{children:[Object(L.jsxs)(ee,{component:"th",scope:"row",align:"center",width:30,children:["channel ",ae]}),Object(L.jsx)(ee,{component:"th",scope:"row",children:"Team member"}),Object(L.jsx)(ee,{component:"th",scope:"row",align:"center",children:"Voted"}),Object(L.jsx)(ee,{component:"th",scope:"row",align:"center",children:Object(L.jsxs)(f.a,{variant:"text",onClick:function(){return je(!0)},title:"Clear all votes",children:["Story points ",Object(L.jsx)(g.a,{})]})})]})}),Object(L.jsxs)(j.a,{children:[Object(L.jsxs)(te,{children:[Object(L.jsx)(ee,{width:30}),Object(L.jsx)(ee,{children:Object(L.jsx)(b.a,{control:Object(L.jsx)(m.a,{checked:Oe,onChange:function(){return he((function(e){return!e}))}}),label:"story points visibility"})}),Object(L.jsx)(ee,{}),Object(L.jsx)(ee,{align:"center",children:Object(L.jsx)(O.a,{title:"Toggle story points visibility",onClick:function(){return he((function(e){return!e}))},children:Oe?Object(L.jsx)(N.a,{}):Object(L.jsx)(S.a,{})})})]},"estimatesVisibility"),xe.sort((function(e,t){return e.username.localeCompare(t.username)})).map((function(e){var t=e.username,n=e.estimate,a=null!==n&&void 0!==n?n:"\u2026",r=n?Object(L.jsx)(S.a,{}):"\u2026";return Object(L.jsxs)(te,{children:[Object(L.jsx)(ee,{width:30,children:Object(L.jsx)(O.a,{onClick:function(){return function(e){var t;return null===(t=A.current)||void 0===t?void 0:t.send(JSON.stringify({type:"remove",payload:e}))}(t)},title:'Remove user "'.concat(t,'"'),children:Object(L.jsx)(g.a,{})})}),Object(L.jsx)(ee,{children:t}),Object(L.jsx)(ee,{align:"center",children:n?"\u2714":""}),Object(L.jsx)(ee,{align:"center",children:Oe?a:r})]},t)})),Object(L.jsxs)(te,{children:[Object(L.jsx)(ee,{width:30}),Object(L.jsx)(ee,{children:Object(L.jsx)(h.a,{variant:"h6",children:"Average"})}),Object(L.jsx)(ee,{}),Object(L.jsx)(ee,{align:"center",children:Object(L.jsx)(h.a,{variant:"h6",children:Oe?ye:"\u2026"})})]},"average")]})]})})})]}),Object(L.jsx)(V,{title:"Confirmation",isOpen:de,setIsOpen:je,onConfirm:function(){var e;return null===(e=A.current)||void 0===e?void 0:e.send(JSON.stringify({type:"reset"}))},children:"Are you sure you want to delete all votes?"})]})})))},289:function(e,t,n){"use strict";var a=n(67),r=n(250),i=(n(0),n(2)),c=Object(r.a)((function(e){return{title:{wordBreak:"break-word"},titleWithIcon:{display:"flex",alignItems:"center"},titleContainer:{display:"flex",justifyContent:"center"},icon:{height:"40px",width:"40px",marginRight:e.spacing(1)}}}));t.a=function(e){var t=c(),n=e.iconType;return Object(i.jsx)("div",{className:t.titleContainer,children:Object(i.jsxs)("div",{className:t.titleWithIcon,children:[Object(i.jsx)(n,{className:t.icon}),Object(i.jsx)(a.a,{variant:"h5",className:t.title,children:e.title})]})})}},292:function(e,t,n){"use strict";var a=n(256),r=n(299),i=n.n(r),c=n(295),o=n.n(c),s=(n(0),n(94)),l=n(2);t.a=function(e){var t=e.data,n=e.hoverMessage,r=e.feedbackMessage,c=e.Icon,u=void 0===c?i.a:c,d=Object(s.c)().setToasterState;return Object(l.jsx)(a.a,{onClick:function(){if(t){var e=null!==r&&void 0!==r?r:"Content copied into clipboard: ".concat(t.substring(0,25)," \u2026");o.a(t,{format:"text/plain"}),d({open:!0,message:e,type:"success",autoHideDuration:2e3})}},disabled:!t,title:null!==n&&void 0!==n?n:"Copy to clipboard",variant:"contained",color:"primary",children:Object(l.jsx)(u,{})})}},425:function(e,t,n){"use strict";function a(e){return!e||0===e.trim().length}function r(e){return!a(e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))}}]);
//# sourceMappingURL=36.d291dbcf.chunk.js.map